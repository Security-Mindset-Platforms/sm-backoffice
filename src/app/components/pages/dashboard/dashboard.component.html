

<div class="md:flex block items-center justify-between my-[1.5rem] page-header-breadcrumb">
    
    <div class="btn-list md:mt-0 mt-2">
      <button routerLink="../users/create" type="button"
        class="ti-btn bg-primary text-white btn-wave !font-medium !me-[0.375rem] !ms-0 !text-[0.85rem] !rounded-[0.35rem] !py-[0.51rem] !px-[0.86rem] shadow-none">
        <i class="ri-filter-3-fill  inline-block"></i>Create user
      </button>
      <button type="button"
        class="ti-btn ti-btn-outline-secondary btn-wave !font-medium  !me-[0.375rem]  !ms-0 !text-[0.85rem] !rounded-[0.35rem] !py-[0.51rem] !px-[0.86rem] shadow-none">
        <i class="ri-upload-cloud-line  inline-block"></i>{{ 'page.dashboard.exportButton' | translate }}
      </button>
    </div>
  </div>

<div class="grid grid-cols-12 gap-x-6">
  <div class="xxl:col-span-6 xl:col-span-12 col-span-12">
    <div class="grid grid-cols-12 gap-x-6">

      <div class="xxl:col-span-12 xl:col-span-6  col-span-12">
        <div class="box">
          <div class="box-header justify-between">
            <div class="box-title">
              Resources overview
            </div>
            <div class="hs-dropdown ti-dropdown">
            </div>
          </div>
          <div class="box-body">

            <div class="flex w-full h-[0.3125rem] mb-6 rounded-full overflow-hidden">
              <div class="flex flex-col justify-center rounded-s-[0.625rem] overflow-hidden bg-primary w-[21%]" aria-valuenow="21" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="flex flex-col justify-center rounded-none overflow-hidden bg-info w-[26%]" aria-valuenow="26" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="flex flex-col justify-center rounded-none overflow-hidden bg-warning w-[35%]" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="flex flex-col justify-center rounded-e-[0.625rem] overflow-hidden bg-success w-[18%]" aria-valuenow="18" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>
            <ul class="list-none mb-0 pt-2 crm-deals-status">
              <li class="primary">
                <div class="flex items-center text-[0.813rem]  justify-between">
                  <div>Users</div>
                  <div class="text-[0.75rem] text-[#8c9097] dark:text-white/50">{{users.length}}</div>
                </div>
              </li>
              <li class="info">
                <div class="flex items-center text-[0.813rem]  justify-between">
                  <div>Organizations</div>
                  <div class="text-[0.75rem] text-[#8c9097] dark:text-white/50">{{stats.totalOrganizations}}</div>
                </div>
              </li>
              <li class="warning">
                <div class="flex items-center text-[0.813rem]  justify-between">
                  <div>Licences</div>
                  <div class="text-[0.75rem] text-[#8c9097] dark:text-white/50">{{stats.totalLicenses}}</div>
                </div>
              </li>
              <li class="success">
                <div class="flex items-center text-[0.813rem]  justify-between">
                  <div>Domaines</div>
                  <div class="text-[0.75rem] text-[#8c9097] dark:text-white/50">{{stats.numberOfDomains}}</div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="xxl:col-span-6 xl:col-span-12 col-span-12">
    <div class="grid grid-cols-12 gap-x-6">

      <div class="xxl:col-span-12 xl:col-span-6  col-span-12">
        <div class="box">
          <div class="box-header justify-between">
            <div class="box-title">
              Licences overview
            </div>
            <div class="hs-dropdown ti-dropdown">
            </div>
          </div>
          <div class="box-body">

            <div class="flex w-full h-[0.3125rem] mb-6 rounded-full overflow-hidden">
              <div class="flex flex-col justify-center rounded-s-[0.625rem] overflow-hidden bg-primary w-[21%]" aria-valuenow="21" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="flex flex-col justify-center rounded-none overflow-hidden bg-info w-[26%]" aria-valuenow="26" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="flex flex-col justify-center rounded-none overflow-hidden bg-warning w-[35%]" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="flex flex-col justify-center rounded-e-[0.625rem] overflow-hidden bg-success w-[18%]" aria-valuenow="18" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>
            <ul class="list-none mb-0 pt-2 crm-deals-status">
              <li class="primary">
                <div class="flex items-center text-[0.813rem]  justify-between">
                  <div>Valid licences</div>
                  <div class="text-[0.75rem] text-[#8c9097] dark:text-white/50">{{stats.validLicenses}}</div>
                </div>
              </li>
              <li class="info">
                <div class="flex items-center text-[0.813rem]  justify-between">
                  <div>Non Valid licences</div>
                  <div class="text-[0.75rem] text-[#8c9097] dark:text-white/50">{{stats.invalidLicenses}}</div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="grid grid-cols-12 gap-x-6">

      <div class="xxl:col-span-12 xl:col-span-6  col-span-12">
        <div class="box">
          <div class="box-header justify-between">
            <div class="box-title">
              Users overview
            </div>
            <div class="hs-dropdown ti-dropdown">
            </div>
          </div>
          <div class="box-body">

            <div class="flex w-full h-[0.3125rem] mb-6 rounded-full overflow-hidden">
              <div class="flex flex-col justify-center rounded-s-[0.625rem] overflow-hidden bg-primary w-[21%]" aria-valuenow="21" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="flex flex-col justify-center rounded-none overflow-hidden bg-info w-[26%]" aria-valuenow="26" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="flex flex-col justify-center rounded-none overflow-hidden bg-warning w-[35%]" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="flex flex-col justify-center rounded-e-[0.625rem] overflow-hidden bg-success w-[18%]" aria-valuenow="18" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>
            <ul class="list-none mb-0 pt-2 crm-deals-status">
              <li class="primary">
                <div class="flex items-center text-[0.813rem]  justify-between">
                  <div>Active users</div>
                  <div class="text-[0.75rem] text-[#8c9097] dark:text-white/50">{{stats.activeAccount}}</div>
                </div>
              </li>
              <li class="info">
                <div class="flex items-center text-[0.813rem]  justify-between">
                  <div>Non active users</div>
                  <div class="text-[0.75rem] text-[#8c9097] dark:text-white/50">{{stats.nonActiveAccount}}</div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="xxl:col-span-12 xl:col-span-12 col-span-12">
  <div class="box custom-card">
    <div class="box-header justify-between">
      <div class="box-title">
       Total users 
      </div>
      <div class="flex flex-wrap gap-2">
        <div>
          <input class="ti-form-control form-control-sm" type="text" placeholder="Rechercher"
            aria-label=".form-control-sm example">
        </div>
        <div class="hs-dropdown ti-dropdown">
          <a href="javascript:void(0);"
            class="ti-btn ti-btn-primary !bg-primary !text-white !py-1 !px-2 !text-[0.75rem] !m-0 !gap-0 !font-medium"
            aria-expanded="false">
            Filter<i class="ri-arrow-down-s-line align-middle ms-1 inline-block"></i>
          </a>
          <ul class="hs-dropdown-menu ti-dropdown-menu hidden" role="menu">

          </ul>
        </div>
      </div>
    </div>
    <div class="box-body">
      <div class="overflow-x-auto">
        <table class="table min-w-full whitespace-nowrap table-hover border table-bordered">
          <thead>
            <tr class="border border-inherit border-solid dark:border-defaultborder/10">
              
              <th scope="col" class="!text-start !text-[0.85rem] min-w-[200px]">Complete Name</th>
              <th scope="col" class="!text-start !text-[0.85rem]">Keycloak ID</th>
              <th scope="col" class="!text-start !text-[0.85rem]">Email/Phone</th>
              <th scope="col" class="!text-start !text-[0.85rem]">Organization ID</th>
              <th scope="col" class="!text-start !text-[0.85rem]">Status</th>
              <th scope="col" class="!text-start !text-[0.85rem]">Action</th>
              <th scope="col" class="!text-start !text-[0.85rem]"></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let u of users; let i=index" class="border border-inherit border-solid hover:bg-gray-100 dark:border-defaultborder/10 dark:hover:bg-light">
             
              <td>
                <div class="flex items-center font-semibold">
                  <span class="!me-2 inline-flex justify-center items-center">
                    <img src="./assets/images/faces/4.jpg" alt="img"
                      class="w-[1.75rem] h-[1.75rem] leading-[1.75rem] text-[0.65rem]  rounded-full">
                  </span>{{u.firstName}} {{u.lastName}}
                </div>
              </td>
              <td>{{u.keycloakId}}</td>
              <td>{{u.email}}
                <br> 
                <span
                class="inline-flex text-info !py-[0.15rem] !px-[0.45rem] rounded-sm !font-semibold !text-[0.75em] bg-info/10">{{u.phone}}</span>
              </td>
              <td>
                {{u.organizationId}}
              </td>
              <td>
                <span
                  class="inline-flex text-info !py-[0.15rem] !px-[0.45rem] rounded-sm !font-semibold !text-[0.75em] bg-info/10">{{u.enabled}}</span>
              </td>
              <td>
                <button (click)="deleteAccount(u.keycloakId)" class="ti-btn ti-btn-danger !mb-0" type="submit">Delete</button>
                <br>
                <button (click)="enableOrDisableAccount(u.keycloakId, 'disable')" *ngIf="u.enabled" class="ti-btn ti-btn-primary !mb-0" type="submit"  style="margin-top: 10px;">Disable</button>
                <button (click)="enableOrDisableAccount(u.keycloakId, 'enable')" *ngIf="!u.enabled" class="ti-btn ti-btn-primary !mb-0" type="submit"  style="margin-top: 10px;">Enable</button>
              </td>
              <td>
                <button [routerLink]="['../users', u.keycloakId]" class="ti-btn ti-btn-danger !mb-0" type="submit">Consulter</button>
               
              </td>
            </tr>

          </tbody>
          @if(users.length <=0) {
            <div class="empty-list-container"  >
                <!-- <img src="assets/images/group.png" alt="Empty List Image" class="empty-list-image" width="100px"> -->
                <p class="empty-list-message">The user list for this organization is empty</p>
              </div>
            }
        </table>
      </div>
    </div>
  </div>
</div>

